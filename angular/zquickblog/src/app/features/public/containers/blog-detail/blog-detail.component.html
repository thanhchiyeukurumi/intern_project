<div ngSkipHydration>
<!-- Profile Header Section -->
  <div class="profile-header" >
    <div class="profile-header-container">
      <ng-container *ngIf="profile && !isLoading">
        <div class="profile-header-content">
          <!-- Profile Image -->
          <nz-avatar [nzSize]="96" [nzSrc]="profile.avatarUrl" nzShape="circle" class="profile-avatar"></nz-avatar>

          <!-- Profile Info -->
          <div class="profile-info">
            <h1 nz-typography class="profile-name">{{ profile.name }}</h1>
            <p nz-typography nzType="secondary" class="profile-bio">{{ profile.bio }}</p>
            <div class="profile-actions">
              <a [href]="'mailto:' + profile.email" *ngIf="profile.email" nz-button nzType="default" class="email-button">Email</a>
            </div>
          </div>
        </div>
      </ng-container>
      <!-- Skeleton Loading cho Header -->
      <ng-container *ngIf="isLoading">
          <div class="profile-header-content skeleton-card">
              <div class="skeleton-avatar"></div>
              <div class="profile-info">
                  <div class="skeleton-name"></div>
                  <div class="skeleton-bio"></div>
                  <div class="skeleton-bio short"></div>
                  <div class="skeleton-button"></div>
              </div>
          </div>
      </ng-container>
    </div>
  </div>

  <!-- Content Navigation (Tab) -->
  <div class="content-nav-container" >
    <div class="content-nav-wrapper">
      <nav class="content-nav">
        <!-- Hiện tại chỉ có 1 tab, để là active mặc định -->
        <a routerLink="." [routerLinkActiveOptions]="{ exact: true }" routerLinkActive="active-tab" class="nav-tab">List of posts</a>
        <!-- Thêm các tab khác nếu cần -->
        <!-- <a routerLink="about" routerLinkActive="active-tab" class="nav-tab">About</a> -->
      </nav>
    </div>
  </div>

  <!-- Main Content Section -->
  <div class="main-content" >
    <div class="main-content-container">
      <div nz-row [nzGutter]="[32, 32]"> <!-- Gutter ngang và dọc -->

        <!-- Articles Column -->
        <div nz-col [nzXs]="24" [nzLg]="16"> <!-- lg:w-2/3 -->
          <div class="posts-list">
            <!-- Article Items -->
            <ng-container *ngIf="!isLoading">
              <div *ngFor="let post of posts" class="post-item">
                <div class="post-meta-top">
                  <span>{{ post.date }}</span>
                  <span class="separator">·</span>
                  <span>{{ post.readTime }} min read</span>
                </div>
                <h2 class="post-title">
                  <a [routerLink]="['/post', post.id]">{{ post.title }}</a>
                </h2>
                <p nz-typography nzType="secondary" class="post-excerpt">{{ post.excerpt }}</p>
                <div class="post-tags">
                  <nz-tag *ngFor="let tag of post.tags" class="post-tag-item">{{ tag }}</nz-tag>
                </div>
                <div class="post-actions-bottom">
                  <button nz-button nzType="text" class="action-button">
                    <span nz-icon nzType="message" nzTheme="outline"></span> <!-- Icon comment -->
                    <span class="action-count">{{ post.commentCount }}</span>
                  </button>
                </div>
              </div>
            </ng-container>
            <!-- Skeleton Loading cho Posts -->
            <ng-container *ngIf="isLoading">
                <div class="post-item skeleton-card" *ngFor="let i of [1,4]">
                    <div class="skeleton-post-content"></div>
                </div>
            </ng-container>

            <!-- See More Button -->
            <div class="see-more-container" *ngIf="posts.length > 0"> <!-- Chỉ hiện khi có bài -->
              <button nz-button nzType="default" class="see-more-button" (click)="loadMorePosts()" [nzLoading]="isLoadingMorePosts">
                See more articles
              </button>
            </div>
          </div>
        </div>

        <!-- Sidebar Column -->
        <div nz-col [nzXs]="0" [nzLg]="8"> <!-- lg:w-1/3, ẩn trên mobile -->
          <div class="sidebar-sticky-content">
              <!-- Writer's Topics Card -->
              <nz-card *ngIf="authorTopics.length > 0 || isLoading" class="sidebar-card" [nzTitle]="authorTopicsTitle" [nzBordered]="false">
                  <ng-template #authorTopicsTitle>
                      <h3 class="sidebar-card-title">Topics {{ profile?.name || 'User' }} writes about</h3>
                  </ng-template>
                  <div class="topic-tag-list">
                    <ng-container *ngIf="!isLoading">
                      <a *ngFor="let topic of authorTopics" [routerLink]="['/category', topic.slug]">
                        <nz-tag class="sidebar-topic-tag">{{ topic.name }}</nz-tag>
                      </a>
                    </ng-container>
                    <!-- Skeleton loading -->
                      <ng-container *ngIf="isLoading">
                          <nz-tag class="sidebar-topic-tag skeleton-tag" *ngFor="let i of [1,2,3]"></nz-tag>
                      </ng-container>
                  </div>
              </nz-card>

              <!-- Recommended Topics Card -->
              <nz-card *ngIf="recommendedTopics.length > 0 || isLoading" class="sidebar-card" [nzTitle]="recommendedTopicsTitle" [nzBordered]="false">
                  <ng-template #recommendedTopicsTitle>
                      <h3 class="sidebar-card-title">Recommended topics</h3>
                  </ng-template>
                  <div class="topic-tag-list">
                    <ng-container *ngIf="!isLoading">
                      <a *ngFor="let topic of recommendedTopics" [routerLink]="['/category', topic.slug]">
                        <nz-tag class="sidebar-topic-tag">{{ topic.name }}</nz-tag>
                      </a>
                    </ng-container>
                    <!-- Skeleton loading -->
                      <ng-container *ngIf="isLoading">
                          <nz-tag class="sidebar-topic-tag skeleton-tag" *ngFor="let i of [1,2,3,4,5]"></nz-tag>
                      </ng-container>
                  </div>
              </nz-card>

              <!-- Other Bloggers Card -->
              <nz-card *ngIf="otherBloggers.length > 0 || isLoading" class="sidebar-card" [nzTitle]="otherBloggersTitle" [nzBordered]="false">
                  <ng-template #otherBloggersTitle>
                      <h3 class="sidebar-card-title">Other Bloggers</h3>
                  </ng-template>
                  <div class="other-bloggers-list">
                    <ng-container *ngIf="!isLoading">
                      <div *ngFor="let blogger of otherBloggers" class="other-blogger-item">
                        <div class="blogger-info">
                          <nz-avatar [nzSize]="64" [nzSrc]="blogger.avatarUrl" nzIcon="user"></nz-avatar>
                          <div class="blogger-details">
                            <p class="blogger-name">{{ blogger.name }}</p>
                            <p nz-typography nzType="secondary" class="blogger-description">{{ blogger.description }}</p>
                          </div>
                        </div>
                        <a [routerLink]="blogger.profileLink" nz-button nzType="default" nzSize="small" class="view-blogger-button">View</a>
                      </div>
                    </ng-container>
                    <!-- Skeleton loading -->
                      <ng-container *ngIf="isLoading">
                          <div class="other-blogger-item skeleton-card" *ngFor="let i of [1,2]">
                              <div class="skeleton-blogger-content"></div>
                          </div>
                      </ng-container>
                  </div>
              </nz-card>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>