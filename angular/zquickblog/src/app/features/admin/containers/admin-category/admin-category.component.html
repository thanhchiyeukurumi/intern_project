<nz-card ngSkipHydration>
  <div class="header-container">
    <div class="title-section">
      <div>
        <h2 class="card-title">All Categories</h2>
        <p class="subtitle">Manage categories, add, edit or delete</p>
      </div>
      <button nz-button nzType="primary" (click)="showForm()">
        <i nz-icon nzType="plus"></i> Add Category
      </button>
    </div>
  </div>

  <!-- Category Form -->
  <div *ngIf="isFormVisible" class="form-container">
    <nz-card class="form-card">
      <h3 class="form-title">Add New Category</h3>

      <div class="form-row">
        <label class="form-label">Category Name</label>
        <nz-input-group>
          <input type="text" nz-input placeholder="Enter category name" [(ngModel)]="categoryName" />
        </nz-input-group>
      </div>

      <div class="form-row">
        <label class="form-label">Parent Category</label>
        <nz-select class="full-width" nzPlaceholder="Select parent category (optional)" [(ngModel)]="parentCategory">
          <nz-option nzValue="null" nzLabel="None"></nz-option>
          <nz-option *ngFor="let category of listOfData" [nzValue]="category.name" [nzLabel]="category.name"></nz-option>
        </nz-select>
      </div>

      <div class="form-actions">
        <button nz-button nzType="default" (click)="hideForm()">Cancel</button>
        <button nz-button nzType="primary" (click)="addCategory()">Add Category</button>
      </div>
    </nz-card>
  </div>

  <nz-table 
    #basicTable 
    [nzData]="listOfData"
    [nzShowPagination]="false" 
    class="categories-table">
    <thead>
      <tr>
        <th [nzWidth]="'50px'" [nzChecked]="checked" [nzIndeterminate]="indeterminate" (nzCheckedChange)="onAllChecked($event)"></th>
        <th>Name</th>
        <th>Parent</th>
        <th>Count</th>
        <th [nzAlign]="'right'">Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let data of basicTable.data">
        <td [nzChecked]="setOfCheckedId.has(data.id)" (nzCheckedChange)="onItemChecked(data.id, $event)"></td>
        <td>{{ data.name }}</td>
        <td>{{ data.parent || '-' }}</td>
        <td>{{ data.count || 0 }}</td>
        <td [nzAlign]="'right'" class="action-buttons">
          <button nz-button nzType="link" class="edit-button">
            <i nz-icon nzType="edit"></i>
          </button>
          <button nz-button nzType="link" class="delete-button" (click)="deleteCategory(data.id)">
            <i nz-icon nzType="delete"></i>
          </button>
        </td>
      </tr>
    </tbody>
  </nz-table>

  <div class="pagination-container">
    <div class="pagination-info">
      Showing <strong>{{ listOfData.length }}</strong> categories
    </div>
  </div>
</nz-card>