<nz-card ngSkipHydration>
  <div class="container">
    <!-- Stats Grid -->
    <div nz-row [nzGutter]="16" class="stats-row">
      <div nz-col [nzXs]="24" [nzSm]="12" [nzMd]="12" [nzLg]="6" [nzXl]="6">
        <nz-card class="stats-card primary-card">
          <div class="stats-icon-container">
            <div class="stats-icon primary">
              <i nz-icon nzType="file-text"></i>
            </div>
          </div>
          <nz-statistic [nzValue]="totalPosts" [nzTitle]="'Total Posts'"></nz-statistic>
          <div class="trend-info">
            <span class="trend-up">
              <i nz-icon nzType="arrow-up"></i> {{postGrowth}}% 
            </span>
            <span class="trend-period">since last month</span>
          </div>
        </nz-card>
      </div>
      
      <div nz-col [nzXs]="24" [nzSm]="12" [nzMd]="12" [nzLg]="6" [nzXl]="6">
        <nz-card class="stats-card success-card">
          <div class="stats-icon-container">
            <div class="stats-icon success">
              <i nz-icon nzType="user"></i>
            </div>
          </div>
          <nz-statistic [nzValue]="totalUsers" [nzTitle]="'Total Users'"></nz-statistic>
          <div class="trend-info">
            <span class="trend-up">
              <i nz-icon nzType="arrow-up"></i> {{userGrowth}}% 
            </span>
            <span class="trend-period">since last month</span>
          </div>
        </nz-card>
      </div>
      
      <div nz-col [nzXs]="24" [nzSm]="12" [nzMd]="12" [nzLg]="6" [nzXl]="6">
        <nz-card class="stats-card warning-card">
          <div class="stats-icon-container">
            <div class="stats-icon warning">
              <i nz-icon nzType="comment"></i>
            </div>
          </div>
          <nz-statistic [nzValue]="totalComments" [nzTitle]="'Comments'"></nz-statistic>
          <div class="trend-info">
            <span class="trend-up">
              <i nz-icon nzType="arrow-up"></i> {{commentGrowth}}% 
            </span>
            <span class="trend-period">since last month</span>
          </div>
        </nz-card>
      </div>
      
      <div nz-col [nzXs]="24" [nzSm]="12" [nzMd]="12" [nzLg]="6" [nzXl]="6">
        <nz-card class="stats-card error-card">
          <div class="stats-icon-container">
            <div class="stats-icon error">
              <i nz-icon nzType="eye"></i>
            </div>
          </div>
          <nz-statistic [nzValue]="totalViews" [nzValueTemplate]="valueTemplate" [nzTitle]="'Total Views'"></nz-statistic>
          <ng-template #valueTemplate>
            <span>{{totalViews | number}}</span>
          </ng-template>
          <div class="trend-info">
            <span class="trend-up">
              <i nz-icon nzType="arrow-up"></i> {{viewGrowth}}% 
            </span>
            <span class="trend-period">since last month</span>
          </div>
        </nz-card>
      </div>
    </div>

    <!-- Bộ lọc khoảng thời gian -->
    <div class="date-range-filter">
      <div class="filter-label">Chọn khoảng thời gian:</div>
      <nz-radio-group [(ngModel)]="selectedDateRange" (ngModelChange)="onDateRangeChange()">
        <label nz-radio-button [nzValue]="option.value" *ngFor="let option of dateRangeOptions">
          {{option.label}}
        </label>
      </nz-radio-group>
    </div>

    <!-- Thông báo lỗi -->
    <nz-card *ngIf="hasError" class="error-card">
      <div class="error-message">
        <i nz-icon nzType="warning" nzTheme="fill"></i>
        <span>{{errorMessage}}</span>
      </div>
    </nz-card>

    <!-- Line Chart: Posts by Month -->
    <nz-card class="chart-card" [nzLoading]="isLoading">
      <h3 class="chart-title">Số bài viết theo thời gian</h3>
      <div class="chart-container">
        <canvas baseChart
          [data]="postsChartData"
          [options]="postsChartOptions"
          [type]="'line'">
        </canvas>
      </div>
    </nz-card>

    <!-- Line Chart: Users by Month -->
    <nz-card class="chart-card" [nzLoading]="isLoading">
      <h3 class="chart-title">Người dùng đăng ký mới theo thời gian</h3>
      <div class="chart-container">
        <canvas baseChart
          [data]="usersChartData"
          [options]="usersChartOptions"
          [type]="'line'">
        </canvas>
      </div>
    </nz-card>

    <!-- Pie Chart: Posts by Category -->
    <nz-card class="chart-card" [nzLoading]="isLoading">
      <h3 class="chart-title">Phân bố bài viết theo danh mục</h3>
      <div class="chart-container pie-chart-container">
        <canvas baseChart
          [data]="categoryChartData"
          [options]="categoryChartOptions"
          [type]="'pie'">
        </canvas>
      </div>
    </nz-card>
  </div>
</nz-card>
