<nz-card ngSkipHydration>
  <div class="header-container">
    <div class="title-section">
      <div>
        <h2 class="card-title">Tất cả người dùng</h2>
        <p class="subtitle">Quản lý người dùng: thêm, sửa hoặc xóa</p>
      </div>
      <button nz-button nzType="primary" (click)="showForm()">
        <i nz-icon nzType="plus"></i> <span>Thêm người dùng</span>
      </button>
    </div>

    <!-- Component form người dùng -->
    <app-user-form
      [isFormVisible]="isFormVisible"
      [formTitle]="formTitle"
      [submitButtonText]="submitButtonText"
      [editMode]="editMode"
      [roles]="roles"
      (formClose)="hideForm()"
      (formSubmit)="handleFormSubmit($event)">
    </app-user-form>

    <!-- Component tìm kiếm và lọc -->
    <app-user-search-filter
      [searchValue]="searchValue"
      [selectedRole]="selectedRole"
      [roles]="roles"
      (searchChange)="onSearchChange($event)"
      (roleChange)="onRoleChange($event)"
      (resetFiltersEvent)="onResetFilters()">
    </app-user-search-filter>
  </div>

  <!-- Component bảng người dùng -->
  <app-user-table
    [displayData]="displayData"
    [loading]="loading"
    [checked]="checked"
    [indeterminate]="indeterminate"
    [setOfCheckedId]="setOfCheckedId"
    (itemChecked)="onItemChecked($event)"
    (allChecked)="onAllChecked($event)"
    (editUser)="showEditForm($event)"
    (deleteUser)="confirmDeleteUser($event)">
  </app-user-table>

  <!-- Component phân trang -->
  <app-admin-pagination
    *ngIf="total > 0"
    [pageIndex]="pageIndex"
    [pageSize]="pageSize"
    [total]="total"
    [pageSizeOptions]="[5, 10, 20, 50, 100]"
    (pageIndexChange)="onPageIndexChange($event)"
    (pageSizeChange)="onPageSizeChange($event)">
  </app-admin-pagination>
</nz-card>