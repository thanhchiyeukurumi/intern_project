<div class="page-header">
  <h2 nz-typography>Comments</h2>
  <div class="action-area">
    <nz-input-group [nzSuffix]="suffixIconSearch" class="search-box">
      <input type="text" nz-input placeholder="Search comments..." [(ngModel)]="searchText"/>
    </nz-input-group>
    <ng-template #suffixIconSearch>
      <span nz-icon nzType="search"></span>
    </ng-template>
  </div>
</div>

<nz-card>
  <div class="comments-list">
    <div class="comment-card" *ngFor="let comment of comments">
      <div class="comment-header">
        <div class="author-info">
          <nz-avatar [nzSrc]="comment.authorAvatar"></nz-avatar>
          <div class="author-details">
            <h4 class="author-name">{{ comment.author }}</h4>
            <span class="author-email">{{ comment.authorEmail }}</span>
          </div>
        </div>
        <div class="comment-meta">
          <nz-badge [nzStatus]="getStatusColor(comment.status)" [nzText]="comment.status"></nz-badge>
          <span class="comment-date">{{ comment.date }}</span>
        </div>
      </div>
      
      <div class="comment-content">
        <div class="post-title">
          On: <a>{{ comment.postTitle }}</a>
        </div>
        <p class="comment-text">{{ comment.content }}</p>
      </div>
      
      <div class="comment-response" *ngIf="comment.response">
        <div class="response-header">
          <span class="response-label">Your response:</span>
        </div>
        <p class="response-text">{{ comment.response }}</p>
        <div class="response-actions">
          <button nz-button nzType="text" nzSize="small">
            <span nz-icon nzType="edit"></span> Edit Response
          </button>
        </div>
      </div>
      
      <div class="comment-reply" *ngIf="!comment.response">
        <textarea 
          nz-input
          placeholder="Write a reply..."
          [nzAutosize]="{ minRows: 2, maxRows: 4 }"
          #responseInput>
        </textarea>
        <div class="reply-actions">
          <button nz-button nzType="primary" nzSize="small" (click)="saveResponse(comment, responseInput.value)">
            Reply
          </button>
        </div>
      </div>
      
      <div class="comment-actions">
        <button 
          nz-button 
          nzType="primary" 
          nzSize="small" 
          *ngIf="comment.status === 'pending'"
          (click)="approveComment(comment.id)">
          <span nz-icon nzType="check"></span> Approve
        </button>
        <button 
          nz-button 
          nzType="text" 
          nzSize="small" 
          *ngIf="comment.status !== 'spam'"
          (click)="markAsSpam(comment.id)">
          <span nz-icon nzType="warning"></span> Spam
        </button>
        <button 
          nz-button 
          nzType="text" 
          nzDanger 
          nzSize="small" 
          nz-popconfirm
          nzPopconfirmTitle="Are you sure you want to delete this comment?"
          nzPopconfirmPlacement="top"
          (nzOnConfirm)="deleteComment(comment.id)">
          <span nz-icon nzType="delete"></span> Delete
        </button>
      </div>
    </div>
  </div>
  
  <div class="empty-state" *ngIf="comments.length === 0">
    <span nz-icon nzType="message" nzTheme="outline"></span>
    <p>No comments yet</p>
  </div>
</nz-card>